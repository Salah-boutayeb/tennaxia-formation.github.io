import{D as S,q as N,r as b,B as D,a as u,o as C,c as U,b as o,d as l,w as n,F as B,_ as M,u as k,i as A,j as L,v as P,m as T,l as v,t as f,x as j,p as E,h as K}from"./index.c68dd7c5.js";import{T as q}from"./TimeFormater.7fba339f.js";const H={class:"flex flex-wrap justify-content-center gap-2 mb-2"},O={class:"formgrid grid"},z={class:"field col"},G=o("label",{for:"nom"},"Nom",-1),J={class:"formgrid grid"},Q={class:"field col"},R=o("label",{for:"prenom"},"Prenom",-1),W={class:"formgrid grid"},X={class:"field col"},Y=o("label",{for:"entite"},"Entite",-1),Z={class:"formgrid grid"},ee={class:"field col"},te=o("label",{for:"adresse"},"Adresse",-1),le={class:"formgrid grid"},oe={class:"field col"},ae=o("label",{for:"email"},"Email",-1),se={class:"formgrid grid"},ne={class:"field col"},de={class:"p-inputgroup"},ie={__name:"ClientForm",setup(h){const y=S(),g=N(),a=b({}),V=b("center"),p=b(!1);D(()=>y.state.selectedMission);const w=d=>{V.value=d,p.value=!0};function F(){let d="";const t="0123456789abcdefghijklmnopqrstuvwxyz-_@ABCDEFGHIJKLMNOPQRSTUVWXYZ";for(var i=0;i<=8;i++){const r=Math.floor(Math.random()*t.length);d+=t.substring(r,r+1)}a.value.password=d}function m(){const d=new FormData;d.append("nom",a.value.nom),d.append("prenom",a.value.prenom),d.append("entite",a.value.entite),d.append("email",a.value.email),d.append("adresse",a.value.adresse),d.append("password",a.value.password),a.value={},y.dispatch("addClient",{user:d}).then(t=>{g.add({severity:"success",summary:"Success Message",detail:t,life:3e3})}).catch(t=>{g.add({severity:"warn",summary:"Success Message",detail:t,life:3e3})})}return(d,t)=>{const c=u("Button"),i=u("Toast"),r=u("InputText"),x=u("Dialog");return C(),U(B,null,[o("div",H,[l(c,{label:"Ajouter client",icon:"pi pi-user",onClick:t[0]||(t[0]=s=>w("topright")),severity:"warning",style:{"min-width":"10rem"}})]),l(i),l(x,{visible:p.value,"onUpdate:visible":t[8]||(t[8]=s=>p.value=s),style:{width:"430px"},header:"session",modal:!0,class:"p-fluid"},{footer:n(()=>[l(c,{label:"Cancel",icon:"pi pi-times",class:"p-button-text",onClick:t[7]||(t[7]=s=>p.value=!1)}),l(c,{label:"Save",icon:"pi pi-check",class:"p-button-text",onClick:m})]),default:n(()=>[o("div",O,[o("div",z,[G,l(r,{id:"nom",type:"text",modelValue:a.value.nom,"onUpdate:modelValue":t[1]||(t[1]=s=>a.value.nom=s)},null,8,["modelValue"])])]),o("div",J,[o("div",Q,[R,l(r,{id:"prenom",type:"text",modelValue:a.value.prenom,"onUpdate:modelValue":t[2]||(t[2]=s=>a.value.prenom=s)},null,8,["modelValue"])])]),o("div",W,[o("div",X,[Y,l(r,{id:"entite",type:"text",modelValue:a.value.entite,"onUpdate:modelValue":t[3]||(t[3]=s=>a.value.entite=s)},null,8,["modelValue"])])]),o("div",Z,[o("div",ee,[te,l(r,{id:"adresse",type:"text",modelValue:a.value.adresse,"onUpdate:modelValue":t[4]||(t[4]=s=>a.value.adresse=s)},null,8,["modelValue"])])]),o("div",le,[o("div",oe,[ae,l(r,{id:"email",type:"text",modelValue:a.value.email,"onUpdate:modelValue":t[5]||(t[5]=s=>a.value.email=s)},null,8,["modelValue"])])]),o("div",se,[o("div",ne,[o("div",de,[l(c,{label:"generate",onClick:F}),l(r,{placeholder:"Password",modelValue:a.value.password,"onUpdate:modelValue":t[6]||(t[6]=s=>a.value.password=s)},null,8,["modelValue"])])])])]),_:1},8,["visible"])],64)}}};const $=h=>(E("data-v-a1d169b3"),h=h(),K(),h),re={class:"grid"},ue={class:"col-12"},ce={class:"card"},me=$(()=>o("h5",null,"Filter Menu",-1)),pe={class:"flex justify-content-between flex-column sm:flex-row"},_e={class:"p-input-icon-left mb-2"},ve=$(()=>o("i",{class:"pi pi-search"},null,-1)),fe={style:{"margin-left":"0.5em","vertical-align":"middle"},class:"image-text"},he={style:{"margin-left":"0.5em","vertical-align":"middle"},class:"image-text"},ye={__name:"Client",setup(h){const y=S();k();const g=D(()=>y.state.clients),a=b(null),V=b(null);A(()=>{y.dispatch("allClients"),p()});const p=()=>{a.value={global:{value:null,matchMode:L.CONTAINS}}},w=()=>{p()};return(F,m)=>{const d=u("Toast"),t=u("Button"),c=u("InputText"),i=u("Column"),r=u("InputNumber"),x=u("Calendar"),s=u("DataTable"),I=P("tooltip");return C(),U("div",re,[o("div",ue,[l(d),o("div",ce,[me,l(s,{value:T(g),paginator:!0,class:"p-datatable-gridlines",rows:10,dataKey:"id",rowHover:!0,filters:a.value,"onUpdate:filters":m[2]||(m[2]=e=>a.value=e),filterDisplay:"menu",loading:V.value,responsiveLayout:"scroll",globalFilterFields:["client","nbr_demandes","agent","ca","createdAt","lieu"]},{header:n(()=>[o("div",pe,[l(t,{type:"button",icon:"pi pi-filter-slash",label:"Clear",class:"p-button-outlined mb-2",onClick:m[0]||(m[0]=e=>w())}),l(ie),o("span",_e,[ve,l(c,{modelValue:a.value.global.value,"onUpdate:modelValue":m[1]||(m[1]=e=>a.value.global.value=e),placeholder:"Keyword Search",style:{width:"100%"}},null,8,["modelValue"])])])]),empty:n(()=>[v(" No customers found. ")]),loading:n(()=>[v(" Loading customers data. Please wait. ")]),default:n(()=>[l(i,{field:"client",header:"Nom de client",style:{"min-width":"12rem"}},{body:n(({data:e})=>[v(f(e.entite),1)]),filter:n(({filterModel:e})=>[l(c,{type:"text",modelValue:e.value,"onUpdate:modelValue":_=>e.value=_,class:"p-column-filter",placeholder:"Search by name"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(i,{header:"nombre de demande",filterField:"nbr_demande",style:{"min-width":"12rem"}},{body:n(({data:e})=>[o("span",fe,f(e.nbr_demandes),1)]),_:1}),l(i,{header:"Agent responsable",filterField:"agent",showFilterMatchModes:!1,filterMenuStyle:{width:"14rem"},style:{"min-width":"14rem"}},{body:n(({data:e})=>[j((C(),U("span",he,[v(f(e.nom+" "+e.prenom),1)])),[[I,e.email]])]),_:1}),l(i,{header:"CA",filterField:"ca",dataType:"numeric",style:{"min-width":"10rem"}},{body:n(({data:e})=>[v(f(e.ca?e.ca:"C-A"),1)]),filter:n(({filterModel:e})=>[l(r,{modelValue:e.value,"onUpdate:modelValue":_=>e.value=_,mode:"currency",currency:"USD",locale:"en-US"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(i,{header:"Date de cr\xE9ation",filterField:"createdAt",dataType:"date",style:{"min-width":"10rem"}},{body:n(({data:e})=>[v(f(T(q).formatDate(e.created_at)),1)]),filter:n(({filterModel:e})=>[l(x,{modelValue:e.value,"onUpdate:modelValue":_=>e.value=_,dateFormat:"mm/dd/yy",placeholder:"mm/dd/yyyy"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),l(i,{field:"Lieu",header:"lieu de client",style:{"min-width":"12rem"}},{body:n(({data:e})=>[o("span",null,f(e.adresse),1)]),filter:n(({filterModel:e})=>[l(c,{type:"text",modelValue:e.value,"onUpdate:modelValue":_=>e.value=_,class:"p-column-filter",placeholder:"Search by place"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["value","filters","loading"])])])])}}},Ve=M(ye,[["__scopeId","data-v-a1d169b3"]]);export{Ve as default};
