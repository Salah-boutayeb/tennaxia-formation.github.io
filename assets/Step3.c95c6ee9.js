import{r as g,q as N,D as $,B as z,a as d,o as r,c as _,b as s,m as e,t as i,d as n,w as h,F as f,f as k,y as j,g as P}from"./index.c68dd7c5.js";import{T as b}from"./TimeFormater.7fba339f.js";const E={class:"col-12"},H={class:"card"},U=s("h5",null,"Proposition",-1),q={key:0,class:"grid"},G={class:"col-12 md:col-5 lg:col-5"},L=s("h6",null,"Intitul\xE9",-1),R={class:"line-height-3 m-0"},A=s("h6",null,"Description",-1),J={class:"line-height-3 m-0"},K=s("span",{class:"p-tag"},"D\xE9tails",-1),M={class:"grid"},O=s("div",{class:"col-12 md:col-6 lg:col-3"},[s("h5",null,"Format:")],-1),Q={class:"col-12 md:col-6 lg:col-9"},W=s("div",{class:"col-12 md:col-6 lg:col-3"},[s("h6",null,"Date de debut:")],-1),X={class:"col-12 md:col-6 lg:col-3"},Y=s("div",{class:"col-12 md:col-6 lg:col-3"},[s("h6",null,"Date de debut:")],-1),Z={class:"col-12 md:col-6 lg:col-3"},ss=s("div",{class:"col-12"},[s("h5",null,"Documents attach\xE9s:")],-1),es={class:"col-12"},os={class:"grid"},ts=["href"],ls={class:"col-12 md:col-2 lg:col-2"},is={class:"col-12 md:col-5 lg:col-5 align-items-center justify-content-center"},ns={class:"grid"},as={class:"col"},cs=s("h6",null,"Nom:",-1),ds=s("h6",null,"Role:",-1),rs=s("p",null,"Gestionnaire",-1),_s={class:"col"},us=s("h6",null,"Email:",-1),ps=s("h6",null,"T\xE9l\xE9:",-1),ms={class:"grid"},hs=s("div",{class:"col-3"},[s("h5",null,"Status:")],-1),vs={class:"col-9"},gs=s("div",{class:"col-3"},[s("h5",null,"Prix:")],-1),fs={class:"col-9"},bs={class:"grid"},ys={class:"line-height-3 m-0"},Ds={class:"flex justify-content-center flex-wrap"},ks={class:"p-float-label"},Ps=s("label",null,"message",-1),ws={__name:"Step3",setup(xs){const y=g("center"),p=g(!1),x=a=>{y.value=a,p.value=!0},D=N(),c=$(),m=g(null),o=z(()=>c.state.selectedProposition),C=a=>{c.dispatch("sendProposition",{propositionId:a.id,missionId:c.state.selectedDemande.mission.id})},T=a=>{c.dispatch("acceptProposition",{propositionId:a.id,missionId:c.state.selectedDemande.mission.id,message:null}).then(l=>D.add({severity:"success",summary:"Successful",detail:l,life:3e3})).catch(()=>{})},w=()=>{c.dispatch("refuserProposition",{propositionId:o.value.id,missionId:c.state.selectedDemande.mission.id,message:m.value}).then(a=>D.add({severity:"success",summary:"Successful",detail:a,life:3e3})).catch(()=>{}),m.value=""};return(a,l)=>{const v=d("Divider"),B=d("Chip"),I=d("Tag"),S=d("Fieldset"),u=d("Button"),F=d("Textarea"),V=d("Dialog");return r(),_(f,null,[s("div",E,[s("div",H,[U,e(o).id?(r(),_("div",q,[s("div",G,[L,s("p",R,i(e(o).intitule),1),A,s("p",J,i(e(o).details),1),n(v,{layout:"horizontal",align:"center"},{default:h(()=>[K]),_:1}),s("div",M,[O,s("div",Q,[n(B,{label:e(o).format,class:"mr-2 mb-2"},null,8,["label"])]),W,s("div",X,[s("p",null,i(e(b).formatDate(e(o).date_debut)),1)]),Y,s("div",Z,[s("p",null,i(e(b).formatDate(e(o).date_fin)),1)]),ss,s("div",es,[s("div",os,[(r(!0),_(f,null,k(e(o).documents,t=>(r(),_("div",{class:"col-12",key:t.id},[s("span",null,i(t.ref.type)+" : ",1),s("a",{href:t.filepath,target:"_blank",rel:"noopener noreferrer"},i(t.filename),9,ts)]))),128))])])])]),s("div",ls,[n(v,{layout:"lg:vertical horizontal "})]),s("div",is,[s("div",ns,[s("div",as,[cs,s("p",null,i(e(o).gestionnaire.nom),1),s("p",null,i(e(o).gestionnaire.prenom),1),ds,rs]),s("div",_s,[us,s("p",null,i(e(o).gestionnaire.email),1),ps,s("p",null,i(e(o).gestionnaire.telephone),1)])]),n(v,{layout:"horizontal",align:"center"}),s("div",ms,[hs,s("div",vs,[n(I,{class:"mr-2",severity:"info",value:e(o).etat},null,8,["value"])]),gs,s("div",fs,[s("p",null,i(e(o).prix)+" DHS TTC",1)])]),s("div",bs,[e(o).commentaires?(r(),j(S,{key:0,legend:"commentaires ("+e(o).commentaires.length+")",toggleable:!0,style:{width:"340px"}},{default:h(()=>[(r(!0),_(f,null,k(e(o).commentaires,t=>(r(),_("div",{key:t.id},[s("span",null,[s("b",null,i(e(b).formatDate1(t.created_at))+" :",1)]),s("p",ys,i(t.message),1)]))),128))]),_:1},8,["legend"])):P("",!0)])])])):P("",!0),s("div",Ds,[n(u,{label:"envoyer",disabled:e(o).is_sent,icon:"pi pi-send",onClick:l[0]||(l[0]=t=>C(e(o))),iconPos:"right",class:"mr-2 mb-2"},null,8,["disabled"]),n(u,{label:"accepte",disabled:!e(o).is_sent,icon:"pi pi-send",onClick:l[1]||(l[1]=t=>T(e(o))),iconPos:"right",class:"mr-2 mb-2"},null,8,["disabled"]),n(u,{label:"refuser",disabled:!e(o).is_sent,icon:"pi pi-send",onClick:l[2]||(l[2]=t=>x("top")),iconPos:"right",class:"mr-2 mb-2"},null,8,["disabled"])])])]),n(V,{visible:p.value,"onUpdate:visible":l[5]||(l[5]=t=>p.value=t),header:"Header",style:{width:"50vw"},position:y.value,modal:!0,draggable:!1},{footer:h(()=>[n(u,{label:"No",icon:"pi pi-times",onClick:l[4]||(l[4]=t=>p.value=!1),text:""}),n(u,{label:"envoyer",icon:"pi pi-check",onClick:w,autofocus:""})]),default:h(()=>[s("span",ks,[n(F,{modelValue:m.value,"onUpdate:modelValue":l[3]||(l[3]=t=>m.value=t),rows:"5",style:{width:"47vw"}},null,8,["modelValue"]),Ps])]),_:1},8,["visible","position"])],64)}}};export{ws as default};
